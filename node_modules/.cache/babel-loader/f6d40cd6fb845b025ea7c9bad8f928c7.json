{"ast":null,"code":"import _classCallCheck from\"/Users/la40020503/Desktop/SheCodes/weather-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/la40020503/Desktop/SheCodes/weather-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/la40020503/Desktop/SheCodes/weather-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/la40020503/Desktop/SheCodes/weather-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from\"react\";import axios from\"axios\";import Api from\"./Api\";import DateUtil from\"./DateUtil\";import\"./Forecast.css\";import WeatherIcon from\"./WeatherIcon\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Forecast=/*#__PURE__*/function(_Component){_inherits(Forecast,_Component);var _super=_createSuper(Forecast);function Forecast(){var _this;_classCallCheck(this,Forecast);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={city:_this.props.city};_this.refresh=function(){var url=\"\".concat(Api.url,\"/data/2.5/forecast?appid=\").concat(Api.key,\"&units=metric&q=\").concat(_this.state.city);axios.get(url).then(function(response){var forecast=response.data.list;// The API returns the forecast every 3 hour, so we are exrtacting\n// the weather for every 24 hours which 8 times 3 hour cycles\nvar dailyForecast=[7,15,23,31,39].map(function(index){return{description:forecast[index].weather[0].main,icon:forecast[index].weather[0].icon,precipitation:Math.round(forecast[index].main.humidity)+\"%\",temperature:Math.round(forecast[index].main.temp),day:new DateUtil(new Date(forecast[index].dt*1000)).day(true),wind:Math.round(forecast[index].wind.speed)+\"km/h\"};});_this.setState({forecast:dailyForecast});});};return _this;}_createClass(Forecast,[{key:\"componentWillMount\",value:function componentWillMount(){this.refresh();}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){var _this2=this;this.setState({city:nextProps.city},function(){_this2.refresh();});}},{key:\"render\",value:function render(){if(this.state.forecast){return/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:this.state.forecast.map(function(weather,index){return/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"forecast-day\",children:weather.day}),/*#__PURE__*/_jsx(\"div\",{className:\"forecast-icon\",children:/*#__PURE__*/_jsx(WeatherIcon,{iconName:weather.icon})}),/*#__PURE__*/_jsxs(\"div\",{className:\"forecast-temperature\",children:[weather.temperature,\"\\xB0\"]})]},index);})});}else{return/*#__PURE__*/_jsx(\"div\",{});}}}]);return Forecast;}(Component);export{Forecast as default};","map":{"version":3,"names":["React","Component","axios","Api","DateUtil","WeatherIcon","Forecast","state","city","props","refresh","url","key","get","then","response","forecast","data","list","dailyForecast","map","index","description","weather","main","icon","precipitation","Math","round","humidity","temperature","temp","day","Date","dt","wind","speed","setState","nextProps"],"sources":["/Users/la40020503/Desktop/SheCodes/weather-react-app/src/Forecast.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport axios from \"axios\";\nimport Api from \"./Api\";\nimport DateUtil from \"./DateUtil\";\nimport \"./Forecast.css\";\nimport WeatherIcon from \"./WeatherIcon\";\n\nexport default class Forecast extends Component {\n  state = {\n    city: this.props.city,\n  };\n  componentWillMount() {\n    this.refresh();\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.setState({ city: nextProps.city }, () => {\n      this.refresh();\n    });\n  }\n\n  refresh = () => {\n    let url = `${Api.url}/data/2.5/forecast?appid=${Api.key}&units=metric&q=${this.state.city}`;\n\n    axios.get(url).then((response) => {\n      let forecast = response.data.list;\n      // The API returns the forecast every 3 hour, so we are exrtacting\n      // the weather for every 24 hours which 8 times 3 hour cycles\n      let dailyForecast = [7, 15, 23, 31, 39].map((index) => {\n        return {\n          description: forecast[index].weather[0].main,\n          icon: forecast[index].weather[0].icon,\n          precipitation: Math.round(forecast[index].main.humidity) + \"%\",\n          temperature: Math.round(forecast[index].main.temp),\n          day: new DateUtil(new Date(forecast[index].dt * 1000)).day(true),\n          wind: Math.round(forecast[index].wind.speed) + \"km/h\",\n        };\n      });\n      this.setState({ forecast: dailyForecast });\n    });\n  };\n  render() {\n    if (this.state.forecast) {\n      return (\n        <div className=\"row\">\n          {this.state.forecast.map((weather, index) => {\n            return (\n              <div className=\"col-sm-2\" key={index}>\n                <div className=\"forecast-day\">{weather.day}</div>\n                <div className=\"forecast-icon\">\n                  <WeatherIcon iconName={weather.icon} />\n                </div>\n                <div className=\"forecast-temperature\">\n                  {weather.temperature}Â°\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      );\n    } else {\n      return <div />;\n    }\n  }\n}\n"],"mappings":"whBAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,MAAOC,MAAK,KAAM,OAAO,CACzB,MAAOC,IAAG,KAAM,OAAO,CACvB,MAAOC,SAAQ,KAAM,YAAY,CACjC,MAAO,gBAAgB,CACvB,MAAOC,YAAW,KAAM,eAAe,CAAC,2FAEnBC,SAAQ,mUAC3BC,KAAK,CAAG,CACNC,IAAI,CAAE,MAAKC,KAAK,CAACD,IACnB,CAAC,OAWDE,OAAO,CAAG,UAAM,CACd,GAAIC,IAAG,WAAMR,GAAG,CAACQ,GAAG,qCAA4BR,GAAG,CAACS,GAAG,4BAAmB,MAAKL,KAAK,CAACC,IAAI,CAAE,CAE3FN,KAAK,CAACW,GAAG,CAACF,GAAG,CAAC,CAACG,IAAI,CAAC,SAACC,QAAQ,CAAK,CAChC,GAAIC,SAAQ,CAAGD,QAAQ,CAACE,IAAI,CAACC,IAAI,CACjC;AACA;AACA,GAAIC,cAAa,CAAG,CAAC,CAAC,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAE,EAAE,CAAC,CAACC,GAAG,CAAC,SAACC,KAAK,CAAK,CACrD,MAAO,CACLC,WAAW,CAAEN,QAAQ,CAACK,KAAK,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC,CAACC,IAAI,CAC5CC,IAAI,CAAET,QAAQ,CAACK,KAAK,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC,CAACE,IAAI,CACrCC,aAAa,CAAEC,IAAI,CAACC,KAAK,CAACZ,QAAQ,CAACK,KAAK,CAAC,CAACG,IAAI,CAACK,QAAQ,CAAC,CAAG,GAAG,CAC9DC,WAAW,CAAEH,IAAI,CAACC,KAAK,CAACZ,QAAQ,CAACK,KAAK,CAAC,CAACG,IAAI,CAACO,IAAI,CAAC,CAClDC,GAAG,CAAE,GAAI5B,SAAQ,CAAC,GAAI6B,KAAI,CAACjB,QAAQ,CAACK,KAAK,CAAC,CAACa,EAAE,CAAG,IAAI,CAAC,CAAC,CAACF,GAAG,CAAC,IAAI,CAAC,CAChEG,IAAI,CAAER,IAAI,CAACC,KAAK,CAACZ,QAAQ,CAACK,KAAK,CAAC,CAACc,IAAI,CAACC,KAAK,CAAC,CAAG,MACjD,CAAC,CACH,CAAC,CAAC,CACF,MAAKC,QAAQ,CAAC,CAAErB,QAAQ,CAAEG,aAAc,CAAC,CAAC,CAC5C,CAAC,CAAC,CACJ,CAAC,sEA7BD,6BAAqB,CACnB,IAAI,CAACT,OAAO,EAAE,CAChB,CAAC,yCAED,mCAA0B4B,SAAS,CAAE,iBACnC,IAAI,CAACD,QAAQ,CAAC,CAAE7B,IAAI,CAAE8B,SAAS,CAAC9B,IAAK,CAAC,CAAE,UAAM,CAC5C,MAAI,CAACE,OAAO,EAAE,CAChB,CAAC,CAAC,CACJ,CAAC,sBAsBD,iBAAS,CACP,GAAI,IAAI,CAACH,KAAK,CAACS,QAAQ,CAAE,CACvB,mBACE,YAAK,SAAS,CAAC,KAAK,UACjB,IAAI,CAACT,KAAK,CAACS,QAAQ,CAACI,GAAG,CAAC,SAACG,OAAO,CAAEF,KAAK,CAAK,CAC3C,mBACE,aAAK,SAAS,CAAC,UAAU,wBACvB,YAAK,SAAS,CAAC,cAAc,UAAEE,OAAO,CAACS,GAAG,EAAO,cACjD,YAAK,SAAS,CAAC,eAAe,uBAC5B,KAAC,WAAW,EAAC,QAAQ,CAAET,OAAO,CAACE,IAAK,EAAG,EACnC,cACN,aAAK,SAAS,CAAC,sBAAsB,WAClCF,OAAO,CAACO,WAAW,UAChB,GAPuBT,KAAK,CAQ9B,CAEV,CAAC,CAAC,EACE,CAEV,CAAC,IAAM,CACL,mBAAO,cAAO,CAChB,CACF,CAAC,sBAxDmCpB,SAAS,SAA1BK,QAAQ"},"metadata":{},"sourceType":"module"}